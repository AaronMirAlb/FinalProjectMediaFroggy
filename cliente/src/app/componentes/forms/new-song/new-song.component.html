<app-navbar></app-navbar>
<main class="newpl-container" *ngIf="this.order!=0">
  <section class="newpl-box">
    <article class="header d-flex justify-content-between">
      <h1 tabindex=0>Nueva Canción</h1>
      <button class="go-back btn btn-outline-dark" (click)="goBack()">X</button>
    </article>
    <form [formGroup]="newSong" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="nombre" class="label">*Título</label>
        <input class="form-control" 
        type="text" id="nombre" 
        placeholder="Título"
        [class.is-invalid]="nameInvalid"
        formControlName="name">
        <small *ngIf="nameInvalid" class="formError">Nombre de canción incorrecto. Mínimo 3 caracteres, máximo 20.</small>
      </div>

      <div class="form-group">
        <div class="d-flex align-items-end" *ngIf="!helpOrder">
          <label for="orden" class="label">*Orden</label>
          <button class="btn btn-outline-dark help" (click)="toogleHelpOrder()">?</button>
        </div>
        <div class="d-flex align-items-end" *ngIf="helpOrder">
          <label for="orden" class="label">El orden por defecto es el número de canciones más uno.</label>
          <button class="btn btn-outline-dark help" (click)="toogleHelpOrder()">?</button>
        </div>
        <input type="number" readonly required class="form-control" #orden id="orden" aria-describedby="namePlaylist" placeholder="{{order}}" formControlName="order">
      </div>

      <div class="form-group">
        <label for="exampleFormControlTextarea1">Letra</label>
        <textarea class="form-control" id="exampleFormControlTextarea1" placeholder="Añade la letra de la cancion" rows="3" formControlName="lyrics"></textarea>
      </div>

      <div class="form-group">
        <label for="exampleInputImage" class="label-img">*Archivo</label>
        <input class="form-control upload-img"
        type="file" required (change)="setFile($event)"
        id="exampleInputImage">
        <small class="formError" *ngIf="!isFile">Fichero obligatorio.</small>
      </div>

      <button type="submit"  [disabled]="newSong.invalid || !isFile" class="btn btn-dark">CREAR</button>
    </form>
  </section>
</main>
<app-reproductor></app-reproductor>
