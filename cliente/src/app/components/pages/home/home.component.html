<app-navbar></app-navbar>
<app-spinner *ngIf="!userInfo"></app-spinner>
<main class="home-container d-flex" *ngIf="userInfo">
  <section class="homeDisp">
    <section class="container">
      <section class="row">
        <article class="col-lg-2 col-md-4 col-sm-6 d-flex justify-content-center mb-3">
          <img class="profile-img2" [src]="userInfo.imageProfile" alt="Imagen de perfil">
        </article>
        <article class="col-lg-10 col-md-8 col-sm-6 welcome">
          <h1 tabindex=0>
            Bienvenid@ a MediaFroggy,<br/>
            {{userInfo.username}}
            <h3>¿Qué te apetece escuchar hoy?</h3>
          </h1>
          <button [ngClass]="{'start-tutorial': !userInfo.news, 'seen-tutorial': userInfo.news}" aria-label="Abrir tutorial" class="btn btn-light" data-bs-target="#exampleModalToggle" data-bs-toggle="modal">
            Aprende a usar MediaFroggy
          </button>
        </article>
      </section>
    </section>
  </section>

  <hr class="divider"/>

  <section class="favs">
    <article class="header-playlist d-flex justify-content-between">
      <h2 tabindex=0>Mis playlists</h2>
    </article>

    <section class="container">
      <section class="row">
        <section class="col-md-6">
          <article class="divBuscador">
            <div class="lupa">
              <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
              </svg>
            </div>
            <input class="buscador" #search [(ngModel)]="query" type="text" placeholder="Nombre de la playlist">
          </article>
          <article class=" playlist-list col-sm-12">
            <app-playlist-card *ngFor="let playlist of playlists | byName:query" [playlist]="playlist" ></app-playlist-card>
          </article>
        </section>

        <article class="addPlaylist col-md-6 col-sm-12">
          <button class="btn newplaylist" aria-label="Ir a nueva playlist" (click)="goToNewPlaylist()">
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill="whitesmoke" class="bi bi-patch-plus" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z"/>
              <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"/>
            </svg>
          </button>
          <p>Crear playlist</p>
        </article>
      </section>
    </section>
  </section>

  <hr class="divider"/>

  <section class="favs">
    <h2 tabindex=0>Mis favoritos
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-suit-heart heart-svg" viewBox="0 0 16 16">
        <path d="m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z"/>
      </svg>
    </h2>
    <article class="container" *ngIf="artistsFav[0]">
      <h3 tabindex=0>Artistas</h3>
      <div class="row row-cols-auto">
        <div class="d-flex flex-wrap col">
          <app-fav-card *ngFor="let favArtist of getArtistsFav()" [favArtist] = "favArtist" ></app-fav-card>
        </div>
      </div>
    </article>
    <article class="container" *ngIf="albumsFav[0]">
      <h3 tabindex=0>Álbumes</h3>
      <div class="row row-cols-auto">
        <div class="d-flex flex-wrap col">
          <app-fav-card *ngFor="let favAlbum of getAlbumsFav()" [favAlbum] = "favAlbum" ></app-fav-card>
        </div>
      </div>
    </article>
  </section>

  <!-- tutorial -->
  <section class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <section class="modal-dialog modal-dialog-centered modal-lg">
      <section class="modal-content">
        <article class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalToggleLabel" style="color: white;">¡Bienvenid@, {{userInfo.username}}!</h1>
          <button type="button" class="btn-close btn-close-white" aria-label="Cerrar tutorial" data-bs-dismiss="modal"></button>
        </article>
        <article class="modal-body">
          <p class="modal-text" style="color: white;">
            Nos alegramos mucho de que te hayas unido a nuestra plataforma.
            Aquí podrás descubrir y disfrutar de tus artistas, álbumes y canciones favoritas.
            En este tutorial, te guiaremos a través de las diferentes secciones y características de la web.
            <br>
            ¡Comencemos!
          </p>
        </article>
        <article class="modal-footer">
          <button class="btn btn-light" data-bs-target="#exampleModalToggle2" aria-label="Página siguiente" data-bs-toggle="modal">Siguiente</button>
        </article>
      </section>
    </section>
  </section>
  <section class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
    <section class="modal-dialog modal-dialog-centered modal-lg">
      <section class="modal-content">
        <article class="modal-header">
          <h1 class="modal-title fs-5" style="color: white;" id="exampleModalToggleLabel2">Inicio</h1>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar tutorial"></button>
        </article>
        <article class="modal-body">
          <p class="modal-text" style="color: white;">
            En primer lugar comenzaremos por la sección de <strong>Inicio</strong> que está dividida en 2 partes: <br> <br>
            Parte 1: <strong>Playlist</strong> <br> <br>
            <img src="../../../../assets/Info/playlists.webp" class="modal-image" alt="Sección de playlist" width="100%"> <br> <br>
            Aquí veremos un buscador para filtrar el nombre de nuestras playlists, además de un botón que nos permite
            crear una nueva playlist, de la que tendremos que indicar su nombre y la privacidad de la misma.<br> <br>
            <img src="../../../../assets/Info/CrearPlaylist.webp" class="modal-image" alt="Formulario para crear playlist" width="100%"> <br> <br>
            También tenemos dos botones: uno para editar el nombre de nuestra playlist y el otro para eliminarla.
            <br> <br>
            Parte 2: <strong>Favoritos</strong><br> <br>
            En este apartado tenemos nuestros artistas y álbumes favoritos separados en una sección para cada uno. Esto
            se consigue clicando en el corazón. Una vez desmarquemos este corazón lo eliminaremos de la lista. <br> <br>
            <img src="../../../../assets/Info/Favoritos1.webp" class="modal-image" alt="Sección de favoritos - Artistas" width="70%"> <br> <br>
            <img src="../../../../assets/Info/Favoritos2.webp" class="modal-image" alt="Sección de favoritos - Álbumes" width="70%"> <br> <br>
          </p>
        </article>
        <article class="modal-footer">
          <button class="btn btn-light" data-bs-target="#exampleModalToggle" aria-label="Página anterior" data-bs-toggle="modal">Volver</button>
          <button class="btn btn-light" data-bs-target="#exampleModalToggle3" aria-label="Página siguiente" data-bs-toggle="modal">Siguiente</button>
        </article>
      </section>
    </section>
  </section>
  <section class="modal fade" id="exampleModalToggle3" aria-hidden="true" aria-labelledby="exampleModalToggleLabel3" tabindex="-1">
    <section class="modal-dialog modal-dialog-centered modal-lg">
      <section class="modal-content">
        <article class="modal-header">
          <h1 class="modal-title fs-5" style="color: white;" id="exampleModalToggleLabel3">Buscador</h1>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar tutorial"></button>
        </article>
        <article class="modal-body">
          <p class="modal-text" style="color: white;">
            La sección de <strong>Buscador</strong> la dividiremos en 2 bloques: <br> <br>
            Parte 1: <strong>Filtros y Novedades</strong><br> <br>
            En esta sección encontramos un filtro para buscar el nombre que deseemos y en la parte derecha veremos otro en el que podemos filtrar por artistas, álbumes y canciones, bastaría solo con seleccionar lo que deseamos ver o deseleccionar lo que no.
            <br>
            Además, encontramos la sección de novedades, donde se mostraran los artistas recién llegados o con nueva música.
            <br><br>
            <img src="../../../../assets/Info/Filtros.webp" class="modal-image" alt="Filtros del buscador" width="100%"> <br> <br>
            Parte 2: <strong>Contenido</strong><br><br>
            <img src="../../../../assets/Info/Contenido.webp" class="modal-image" alt="Contenido de la sección buscador" width="100%"> <br> <br>
            En esta sección veremos el contenido principal de nuestra web. Lo podemos dividir en 3 secciones: artistas, álbumes y canciones. Podemos acceder a cada uno haciendole clic <br> <br>
          </p>
        </article>
        <article class="modal-footer">
          <button class="btn btn-light" data-bs-target="#exampleModalToggle2" aria-label="Página anterior" data-bs-toggle="modal">Volver</button>
          <button class="btn btn-light" data-bs-target="#exampleModalToggle4" aria-label="Página siguiente" data-bs-toggle="modal">Siguiente</button>
        </article>
      </section>
    </section>
  </section>
  <section class="modal fade" id="exampleModalToggle4" aria-hidden="true" aria-labelledby="exampleModalToggleLabel4" tabindex="-1">
    <section class="modal-dialog modal-dialog-centered modal-lg">
      <section class="modal-content">
        <article class="modal-header">
          <h1 class="modal-title fs-5" style="color: white;" id="exampleModalToggleLabel4">Detalles</h1>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar tutorial"></button>
        </article>
        <article class="modal-body">
          <p class="modal-text" style="color: white;">
            Ahora, profundizaremos en 2 partes: <br> <br>
            Parte 1: <strong>Artistas</strong><br> <br>
            <img src="../../../../assets/Info/Artista.webp" class="modal-image" alt="Detalle de artista" width="80%"> <br> <br>
            Una vez dentro del artista encontramos su imagen de perfil, su nombre y su descripción. También un poco más abajo
            vemos sus albumes. <br>
            Ahora entraremos al álbum haciendo clic en el mismo <br> <br>
            Parte 2: <strong>Álbumes</strong><br><br>
            <img src="../../../../assets/Info/Album.webp" class="modal-image" alt="Detalle de álbum" width="80%"> <br> <br>
            Ahora veremos la imagen del album, su nombre y su año de lanzamiento.
            También veremos un filtrado de canción por nombre. <br>
            Podremos escuchar cualquier canción haciendole clic y directamente se reproducirá en nuestro reproductor. <br>
            También podremos añadir la canción a una playlist indicando en el botón desplegable la playlist que queramos. <br> <br>
            <img src="../../../../assets/Info/PlaylistCancion.webp" class="modal-image" alt="Botón de añadir a playlist" width="50%"> <br> <br>
            De esta forma clicando a cualquiera de nuestras playlists se añadirá a ella automaticamente.
            </p>
        </article>
        <article class="modal-footer">
          <button class="btn btn-light" data-bs-target="#exampleModalToggle3" aria-label="Página anterior" data-bs-toggle="modal">Volver</button>
          <button class="btn btn-light" data-bs-target="#exampleModalToggle5" aria-label="Página siguiente" data-bs-toggle="modal">Siguiente</button>
        </article>
      </section>
    </section>
  </section>
  <section class="modal fade" id="exampleModalToggle5" aria-hidden="true" aria-labelledby="exampleModalToggleLabel5" tabindex="-1">
    <section class="modal-dialog modal-dialog-centered modal-lg">
      <section class="modal-content">
        <article class="modal-header">
          <h1 class="modal-title fs-5" style="color: white;" id="exampleModalToggleLabel5">Perfil</h1>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar tutorial" (click)="userNews()"></button>
        </article>
        <article class="modal-body">
          <p class="modal-text" style="color: white;">
            Por último veremos como actualizar el <strong>Perfil</strong>: <br> <br>
            <img src="../../../../assets/Info/Perfil.webp" class="modal-image" alt="Formulario de actualización de perfil" width="100%"> <br> <br>
            Como vemos, podemos cambiar cualquier dato de nuestro perfil rellenando este formulario, tanto imagen, nombre de usuario, contraseña y el email. <br>
          </p>
        </article>
        <article class="modal-footer">
          <button class="btn btn-light" data-bs-target="#exampleModalToggle2" aria-label="Volver a la primera página" data-bs-toggle="modal">Vuelta al principio</button>
          <button class="btn btn-light" data-bs-target="#exampleModalToggle4" aria-label="Página anterior" data-bs-toggle="modal">Volver</button>
          <button type="button" class="btn btn-light" data-bs-dismiss="modal" aria-label="Cerrar tutorial" (click)="userNews()">Cerrar</button>
        </article>
      </section>
    </section>
  </section>
</main>
<app-reproductor></app-reproductor>
